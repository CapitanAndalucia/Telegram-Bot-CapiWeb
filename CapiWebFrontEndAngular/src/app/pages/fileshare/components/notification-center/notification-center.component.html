<div class="notificationCenter">
    <button class="bellButton" (click)="toggleDropdown()">
        ðŸ””
        @if (totalCount > 0) {
        <span class="badge">{{ totalCount }}</span>
        }
    </button>

    @if (isOpen()) {
    <div class="dropdown">
        <h4>Solicitudes de Amistad</h4>
        @if (!requests() || requests().length === 0) {
        <p class="empty">No hay solicitudes pendientes</p>
        } @else {
        <ul class="notifList">
            @for (req of requests(); track req.id) {
            <li class="requestItem">
                <span>{{ req.from_user_username }} quiere ser tu amigo</span>
                <div class="requestActions">
                    <button (click)="handleAccept(req.id)" class="acceptBtn">âœ“</button>
                    <button (click)="handleReject(req.id)" class="rejectBtn icon-only">
                        <img src="assets/icons/boton-x.png" alt="Rechazar" class="icon-close" />
                        <span class="visually-hidden">Rechazar</span>
                    </button>
                </div>
            </li>
            }
        </ul>
        }

        <div class="notifHeader">
            <h4 style="margin-bottom: 0">Notificaciones</h4>
            @if (notifications().length > 0) {
            <button class="markReadBtn" (click)="markAllAsRead()">Marcar todo como leÃ­do</button>
            }
        </div>
        @if (!notifications() || notifications().length === 0) {
        <p class="empty">No hay notificaciones</p>
        } @else {
        <ul class="notifList">
            @for (notif of notifications(); track notif.id) {
            <li class="notifItem" [class.unread]="!notif.is_read">
                {{ notif.message }}
            </li>
            }
        </ul>
        }
    </div>
    }
</div>
